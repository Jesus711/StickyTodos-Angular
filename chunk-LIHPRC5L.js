import{a as O,b as R,d as V}from"./chunk-VFXIDMF2.js";import{Ha as T,Ia as E,Ka as I,La as j,Na as H,Oa as P,Pa as b,Qa as i,R as w,Ra as n,S as y,Sa as a,T as p,Ta as C,U as u,Ua as d,Va as h,Wa as m,Xa as s,Ya as x,_a as f,a as g,ab as z,b as v,bb as G,ca as L,da as B,fb as _,gb as M,nb as Y,oa as c,ob as q,pb as F,ta as k,tb as A,ub as D,ya as S}from"./chunk-6EQAXMLF.js";var W=(r,t)=>t.id;function X(r,t){if(r&1&&(i(0,"option",19),s(1),n()),r&2){let e=t.$implicit;b("value",e.id),c(),x(e.title)}}var N=class r{constructor(t){this.todoService=t;B(()=>{let e=this.note;e!==void 0&&this.todoModel.set({id:e().id,title:e().title,description:e().description,created_date:e().created_date,completed:e().completed,color:e().color,completed_date:e().completed_date,listID:String(e().listID),prevList:String(e().listID)})})}closeModal=_();addTodo=_();note=M.required();noteLists=A(()=>this.todoService.getAllLists());todoModel=L({title:"",description:"",created_date:new Date().toLocaleString(),completed:!1,color:"sticky-yellow",completed_date:"",listID:"1",prevList:"1"});todoForm=O(this.todoModel,t=>{V(t.title),V(t.description),t.id,t.color,t.created_date,t.completed,t.listID,t.prevList});updateColor(t){this.todoForm.color().value.set(t)}onSubmit(t){if(t.preventDefault(),this.todoForm().valid()){let e=this.todoModel(),o=v(g({},e),{id:e.id,listID:Number(e.listID)});this.todoService.updateNote(o,Number(e.prevList),o.listID),this.closeModal.emit()}else console.log("ERROR")}static \u0275fac=function(e){return new(e||r)(k(D))};static \u0275cmp=S({type:r,selectors:[["app-edit-todo"]],inputs:{note:[1,"note"]},outputs:{closeModal:"closeModal",addTodo:"addTodo"},decls:27,vars:17,consts:[[3,"submit"],["type","button",1,"w-10","h-10","flex","justify-center","items-center","absolute","rounded-full","bg-gray-500/80","border-2","border-white","text-white","-right-10","-top-10","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-x-icon","lucide-x"],["d","M18 6 6 18"],["d","m6 6 12 12"],[1,"text-xl","font-bold","flex","flex-col"],["type","text",1,"bg-white","rounded-md","text-black","text-[18px]","px-2","py-1","font-semibold",3,"formField"],[1,"flex-1","text-xl","font-bold","flex","flex-col"],["type","text","rows","5",1,"bg-gray-100","rounded-md","text-black","text-[18px]","px-2","py-0.5","resize-none","font-semibold",3,"formField"],[1,"text-xl","font-bold","text-center"],[1,"flex","flex-row","justify-evenly","items-center"],["type","button",1,"w-8","h-8","rounded-full","sticky-yellow","cursor-pointer","border-2","border-black",3,"click"],["type","button",1,"w-8","h-8","rounded-full","sticky-blue","cursor-pointer","border-2","border-black",3,"click"],["type","button",1,"w-8","h-8","rounded-full","sticky-green","cursor-pointer","border-2","border-black",3,"click"],["type","button",1,"w-8","h-8","rounded-full","sticky-purple","cursor-pointer","border-2","border-black",3,"click"],["type","button",1,"w-8","h-8","rounded-full","sticky-pink","cursor-pointer","border-2","border-black",3,"click"],["type","button",1,"w-8","h-8","rounded-full","sticky-orange","cursor-pointer","border-2","border-black",3,"click"],["type","submit"],[3,"formField"],[3,"value"]],template:function(e,o){e&1&&(i(0,"form",0),d("submit",function(Q){return o.onSubmit(Q)}),i(1,"button",1),d("click",function(){return o.closeModal.emit()}),p(),i(2,"svg",2),a(3,"path",3)(4,"path",4),n()(),u(),i(5,"label",5),s(6," Title "),a(7,"input",6),T(),n(),i(8,"label",7),s(9," Description "),a(10,"textarea",8),T(),n(),i(11,"div")(12,"h3",9),s(13,"Color"),n(),i(14,"div",10)(15,"button",11),d("click",function(){return o.updateColor("sticky-yellow")}),n(),i(16,"button",12),d("click",function(){return o.updateColor("sticky-blue")}),n(),i(17,"button",13),d("click",function(){return o.updateColor("sticky-green")}),n(),i(18,"button",14),d("click",function(){return o.updateColor("sticky-purple")}),n(),i(19,"button",15),d("click",function(){return o.updateColor("sticky-pink")}),n(),i(20,"button",16),d("click",function(){return o.updateColor("sticky-orange")}),n()()(),i(21,"button",17),s(22,"Edit"),n(),i(23,"select",18),H(24,X,2,2,"option",19,W),z(26,"async"),n(),T(),n()),e&2&&(m(f("relative w-[360px] h-[340px] ",o.todoForm.color().value()," sticky-text p-2.5 gap-2 rounded-md flex flex-col")),c(7),E(o.todoForm.title,"formField"),c(3),E(o.todoForm.description,"formField"),c(11),m(f("absolute left-1/2 -translate-x-1/2 -bottom-16 w-[200px] h-[48px] text-xl font-semibold ",o.todoForm.color().value()," text-black rounded-md px-3 py-1 cursor-pointer")),c(2),E(o.todoForm.listID,"formField"),m(f("absolute left-1/2 -translate-x-1/2 -top-16 w-[200px] h-[48px] text-xl font-semibold ",o.todoForm.color().value()," text-black rounded-md px-3 py-1 cursor-pointer")),c(),P(G(26,15,o.noteLists)))},dependencies:[R,F,q],encapsulation:2})};function Z(r,t){if(r&1){let e=C();i(0,"div",16)(1,"p",19),s(2,"Completed "),p(),i(3,"svg",20),a(4,"path",21),n()(),u(),i(5,"button",22),d("click",function(){w(e);let l=h();return y(l.updateCompleteStatus())}),s(6,"Undo?"),n()()}}function ee(r,t){if(r&1){let e=C();i(0,"button",22),d("click",function(){w(e);let l=h();return y(l.updateCompleteStatus())}),s(1,"Mark as Completed"),n()}}function te(r,t){if(r&1){let e=C();i(0,"div",18)(1,"app-edit-todo",23),d("closeModal",function(){w(e);let l=h();return y(l.toggleEditForm())}),n()()}if(r&2){let e=h();c(),b("note",e.note_info())}}var $=class r{constructor(t){this.todoService=t}note_info=M.required();delete=_();update=_();showEditMenu=!1;showEditForm=!1;prevScrollY=0;deleteNote(){this.todoService.deleteNote(this.note_info().id,this.note_info().listID),this.showEditMenu=!1}async updateCompleteStatus(){try{let t=await this.todoService.getNoteByID(this.note_info().id);if(t!==void 0)await this.todoService.updateNoteStatus(v(g({},t),{completed:!t.completed}));else throw new Error("Note does not exist with that ID")}catch{console.log("error occurred when trying to update")}}async updateNote(){return await this.todoService.updateNoteStatus(this.note_info())}toggleEditForm(){this.showEditForm=!this.showEditForm,this.showEditForm?(this.prevScrollY=window.scrollY,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",window.scrollTo(0,this.prevScrollY||0))}toggleEditMenu(){this.showEditMenu=!this.showEditMenu}static \u0275fac=function(e){return new(e||r)(k(D))};static \u0275cmp=S({type:r,selectors:[["app-todo"]],inputs:{note_info:[1,"note_info"]},outputs:{delete:"delete",update:"update"},decls:26,vars:8,consts:[[1,"absolute","right-1","top-1.5","hover:cursor-pointer","flex","flex-col","justify-center","items-center","gap-0.5","w-6","h-8","rounded-full",3,"click"],[1,"w-1.5","h-1.5","rounded-full","bg-gray-700"],[1,"absolute","bg-slate-800/50","text-black","right-0","top-10","px-1","flex","flex-col","justify-center","items-start","gap-y-1","rounded-lg","overflow-hidden","transition-all","duration-300",3,"ngClass"],[1,"flex","justify-center","items-center","gap-1","bg-yellow-400","px-1","py-1","rounded-md","w-full","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-pencil-icon","lucide-pencil"],["d","M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"],["d","m15 5 4 4"],[1,"flex","justify-center","items-center","gap-2","bg-red-400","px-1","py-1","rounded-md","w-full","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-trash2-icon","lucide-trash-2"],["d","M10 11v6"],["d","M14 11v6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"],["d","M3 6h18"],["d","M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"max-w-[90%]","font-semibold","text-xl","overflow-hidden","text-ellipsis"],[1,"flex-1","wrap-break-word"],[1,"flex","justify-between"],[1,"self-end","px-2","flex","justify-end","items-center","text-right","font-semibold","opacity-90","hover:opacity-100","hover:cursor-pointer","hover:bg-gray-900/70","hover:text-white","rounded-md"],[1,"fixed","inset-0","z-10","h-screen","flex","w-full","justify-center","items-center","bg-gray-900/50"],[1,"flex","justify-end","items-center","gap-1","font-bold","rounded-md"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-check-icon","lucide-check"],["d","M20 6 9 17l-5-5"],[1,"self-end","px-2","flex","justify-end","items-center","text-right","font-semibold","opacity-90","hover:opacity-100","hover:cursor-pointer","hover:bg-gray-900/70","hover:text-white","rounded-md",3,"click"],[3,"closeModal","note"]],template:function(e,o){e&1&&(i(0,"div")(1,"button",0),d("click",function(){return o.toggleEditMenu()}),a(2,"div",1)(3,"div",1)(4,"div",1),n(),i(5,"div",2)(6,"button",3),d("click",function(){return o.toggleEditForm()}),p(),i(7,"svg",4),a(8,"path",5)(9,"path",6),n(),s(10," Edit "),n(),u(),i(11,"button",7),d("click",function(){return o.deleteNote()}),p(),i(12,"svg",8),a(13,"path",9)(14,"path",10)(15,"path",11)(16,"path",12)(17,"path",13),n(),s(18," Del "),n()(),u(),i(19,"h2",14),s(20),n(),i(21,"p",15),s(22),n(),I(23,Z,7,0,"div",16)(24,ee,2,0,"button",17),n(),I(25,te,2,1,"div",18)),e&2&&(m(f("",o.note_info().color," w-[315px] h-[275px] inline-flex flex-col rounded-sm p-3 pb-1.5 pr-2 sticky-text relative gap-1")),c(5),b("ngClass",o.showEditMenu?"w-[100px] h-[90px]":"w-0 h-0"),c(15),x(o.note_info().title),c(2),x(o.note_info().description),c(),j(o.note_info().completed?23:24),c(2),j(o.showEditForm?25:-1))},dependencies:[F,Y,N],styles:[".cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:50%;background-color:gray;display:inline-flex;color:#fff}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"]})};export{$ as Todo};
